# å¿«ä¹8å¼€å¥–æ•°æ®çˆ¬è™«

## æ¦‚è¿°

æœ¬é¡¹ç›®é›†æˆäº†ä¸€ä¸ªå¿«ä¹8å¼€å¥–æ•°æ®çˆ¬è™«ï¼Œç”¨äºä» https://www.vipc.cn/results/kl8?in=result_list æŠ“å–æœ€æ–°çš„å¼€å¥–æ•°æ®ã€‚

## æ–‡ä»¶ç»“æ„

```
src/
â”œâ”€â”€ crawler/
â”‚   â”œâ”€â”€ happy8Crawler.ts      # çˆ¬è™«ä¸»ç±»
â”‚   â”œâ”€â”€ realCrawler.ts        # çœŸå®æ•°æ®æŠ“å–å®ç°
â”‚   â””â”€â”€ server.ts             # ä»£ç†æœåŠ¡å™¨ï¼ˆå¤„ç†è·¨åŸŸï¼‰
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ geminiService.ts      # é›†æˆäº†çˆ¬è™«çš„GeminiæœåŠ¡
â”‚   â””â”€â”€ lotteryService.ts     # æ–°çš„å½©ç¥¨æ•°æ®æœåŠ¡
â””â”€â”€ pages/
    â””â”€â”€ IssueList.tsx         # æ›´æ–°äº†æ•°æ®æºçš„å¼€å¥–åˆ—è¡¨é¡µé¢
```

## åŠŸèƒ½ç‰¹æ€§

### ğŸ•·ï¸ çˆ¬è™«åŠŸèƒ½
- **ç›®æ ‡ç½‘ç«™**: https://www.vipc.cn/results/kl8?in=result_list
- **æ•°æ®é‡**: æœ€è¿‘10æœŸå¼€å¥–æ•°æ®
- **æ•°æ®å†…å®¹**: æœŸå·ã€å¼€å¥–æ—¥æœŸã€20ä¸ªå¼€å¥–å·ç 
- **æ›´æ–°é¢‘ç‡**: å®æ—¶æŠ“å–ï¼Œç¼“å­˜1å°æ—¶

### ğŸ”§ æŠ€æœ¯å®ç°
- **Playwright**: ç”¨äºæµè§ˆå™¨è‡ªåŠ¨åŒ–å’Œæ•°æ®æŠ“å–
- **Expressä»£ç†æœåŠ¡å™¨**: è§£å†³å‰ç«¯è·¨åŸŸé—®é¢˜
- **ç¼“å­˜æœºåˆ¶**: é¿å…é¢‘ç¹è¯·æ±‚ï¼Œæå‡æ€§èƒ½
- **åå¤‡æ•°æ®**: çˆ¬è™«å¤±è´¥æ—¶ä½¿ç”¨åŸºäºçœŸå®æ•°æ®çš„æ¨¡æ‹Ÿæ•°æ®

### ğŸ“Š æ•°æ®æ ¼å¼
```typescript
interface LotteryDraw {
  issue: string;        // æœŸå·ï¼Œå¦‚ "2025312"
  date: string;         // å¼€å¥–æ—¥æœŸï¼Œå¦‚ "2025-11-22"
  winningNumbers: number[]; // 20ä¸ªå¼€å¥–å·ç 
}
```

## ä½¿ç”¨æ–¹æ³•

### 1. åŸºç¡€ä½¿ç”¨
```typescript
import { getLatestLotteryResults } from './src/services/lotteryService';

// è·å–æœ€æ–°10æœŸæ•°æ®
const results = await getLatestLotteryResults(10);

// è·å–æœ€æ–°ä¸€æœŸæ•°æ®
const latest = await getLatestLotteryResults(1);
```

### 2. æ ¹æ®æœŸå·æŸ¥è¯¢
```typescript
import { getLotteryResultByIssue } from './src/services/lotteryService';

const result = await getLotteryResultByIssue('2025312');
if (result) {
  console.log(`ç¬¬${result.issue}æœŸå¼€å¥–å·ç :`, result.winningNumbers);
}
```

### 3. æ—¥æœŸèŒƒå›´æŸ¥è¯¢
```typescript
import { lotteryService } from './src/services/lotteryService';

const results = await lotteryService.getResultsByDateRange(
  '2025-11-20',
  '2025-11-22'
);
```

## å¯åŠ¨çˆ¬è™«æœåŠ¡å™¨

### æ–¹æ³•1: ä½¿ç”¨è„šæœ¬å¯åŠ¨
```bash
node scripts/start-crawler-server.js
```

### æ–¹æ³•2: ç›´æ¥å¯åŠ¨
```bash
npx ts-node src/crawler/server.ts
```

æœåŠ¡å™¨å°†åœ¨ http://localhost:3002 è¿è¡Œã€‚

## çœŸå®æ•°æ®ç¤ºä¾‹

åŸºäºå®é™…ç½‘ç«™æŠ“å–çš„æ•°æ®æ ¼å¼ï¼š

```javascript
{
  issue: "2025312",
  date: "2025-11-22",
  winningNumbers: [3, 7, 16, 17, 18, 19, 23, 24, 26, 29, 30, 37, 43, 48, 57, 62, 67, 72, 79, 80]
}
```

## æ•°æ®æºè¯´æ˜

### ä¸»è¦æ•°æ®æº
- **å”¯å½©çœ‹çƒ**: https://www.vipc.cn/results/kl8?in=result_list
- **æ•°æ®å‡†ç¡®æ€§**: ä¸å®˜æ–¹ç¦å½©ä¸­å¿ƒåŒæ­¥æ›´æ–°
- **æ›´æ–°æ—¶é—´**: æ¯æ—¥æ™šä¸Š22ç‚¹

### åå¤‡æœºåˆ¶
1. **ç¼“å­˜æ•°æ®**: 1å°æ—¶å†…çš„æŠ“å–æ•°æ®
2. **æ¨¡æ‹Ÿæ•°æ®**: åŸºäºçœŸå®ç½‘ç«™ç»“æ„çš„å¤‡ç”¨æ•°æ®
3. **é”™è¯¯æ¢å¤**: å¤šå±‚æ¬¡çš„æ•°æ®è·å–ç­–ç•¥

## APIæ¥å£

### ä»£ç†æ¥å£
```
POST /api/proxy-crawler
Content-Type: application/json

{
  "url": "https://www.vipc.cn/results/kl8?in=result_list",
  "parser": "happy8"
}
```

### å¥åº·æ£€æŸ¥
```
GET /health
```

## æ³¨æ„äº‹é¡¹

### âš ï¸ é‡è¦æé†’
1. **éµå®ˆrobots.txt**: è¯·ç¡®ä¿æŠ“å–è¡Œä¸ºç¬¦åˆç½‘ç«™è§„å®š
2. **è¯·æ±‚é¢‘ç‡**: å·²è®¾ç½®åˆç†å»¶è¿Ÿï¼Œé¿å…å¯¹æœåŠ¡å™¨é€ æˆå‹åŠ›
3. **æ•°æ®ä½¿ç”¨**: ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œè¯·å‹¿ç”¨äºå•†ä¸šç”¨é€”
4. **æ³•å¾‹åˆè§„**: éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„å’Œç½‘ç«™ä½¿ç”¨æ¡æ¬¾

### ğŸ”’ éšç§å’Œå®‰å…¨
- ä¸å­˜å‚¨ç”¨æˆ·ä¸ªäººä¿¡æ¯
- ä»…æŠ“å–å…¬å¼€çš„å¼€å¥–æ•°æ®
- ä½¿ç”¨ç¼“å­˜å‡å°‘æœåŠ¡å™¨è´Ÿè½½

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: çˆ¬è™«æ•°æ®ä¸ºç©ºï¼Ÿ**
A: æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œæˆ–æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

**Q: è·¨åŸŸè¯·æ±‚è¢«é˜»æ­¢ï¼Ÿ**
A: ç¡®ä¿ä»£ç†æœåŠ¡å™¨åœ¨ç«¯å£3002æ­£å¸¸è¿è¡Œ

**Q: æ•°æ®ä¸æ›´æ–°ï¼Ÿ**
A: æ¸…é™¤ç¼“å­˜æˆ–ç­‰å¾…ç¼“å­˜è¿‡æœŸï¼ˆ1å°æ—¶ï¼‰

### è°ƒè¯•æ¨¡å¼
åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š
```javascript
// æŸ¥çœ‹ç¼“å­˜çŠ¶æ€
lotteryService.getStats()

// æ¸…é™¤ç¼“å­˜
lotteryService.clearCache()
```

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-11-22)
- âœ… å®ç°åŸºç¡€çˆ¬è™«åŠŸèƒ½
- âœ… é›†æˆåˆ°é¡¹ç›®ä¸­
- âœ… æ·»åŠ ç¼“å­˜æœºåˆ¶
- âœ… å®ç°åå¤‡æ•°æ®ç­–ç•¥
- âœ… æ›´æ–°å‰ç«¯ç»„ä»¶ä½¿ç”¨æ–°æ•°æ®æº

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤é—®é¢˜æŠ¥å‘Šå’ŒåŠŸèƒ½è¯·æ±‚ï¼š

1. æ£€æŸ¥æ˜¯å¦å·²æœ‰ç›¸å…³é—®é¢˜
2. æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå¤ç°æ­¥éª¤
3. éµå¾ªé¡¹ç›®çš„ä»£ç è§„èŒƒ

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œè¯·å‹¿ç”¨äºå•†ä¸šç›®çš„ã€‚